<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>

<div id="myDiv" style="width: 480px; height: 400px;"></div>
<script>

    window.charts = {};
    window.step = 0;

    $(document).ready(function(){
        setInterval("repaint()", 1000);
    });
    function repaint() {
        htmlobj = $.ajax({url:"/?act=data&step="+step, async:false});
        obj = JSON.parse(htmlobj.responseText);
        s = 0;
        Object.keys(obj).sort();
        $.each(obj, function(id, val){
            var update = {
                y: [val.x],
                x: [val.y]
            };
            c = window.charts[id];
            if (c == null || c == undefined) {
                newChart(id);
            }
            Plotly.extendTraces(id, update, [0]);
            if (s == 0) {
                s += val.x.length;
            }
        });
        step += s;
    }

    function newChart(id) {
        $(document.body).append("<div id='"+id+"' style='width: 1000px; height: 400px;'></div>");
        var trace = {
            x: [],
            y: [],
            xaxis: 'x',
            yaxis: 'y',
            type: 'scatter'
        };
        var layout = {
            title: id,
        };
        window.charts[id]= Plotly.newPlot(id, [trace], layout);
        return window.charts[id];
    }
</script>
</body>